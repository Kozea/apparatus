include:
  - remote: 'https://gitlab.com/Kozea/ci-master/raw/master/.variables-images.yml'
  - remote: 'https://gitlab.com/Kozea/ci-master/raw/master/.ci-install.yml'
  - remote: 'https://gitlab.com/Kozea/ci-master/raw/master/.ci-build.yml'
  - remote: 'https://gitlab.com/Kozea/ci-master/raw/master/.ci-lint.yml'
  - remote: 'https://gitlab.com/Kozea/ci-master/raw/master/.ci-test.yml'
  - remote: 'https://gitlab.com/Kozea/ci-master/raw/master/.ci-deploy-test.yml'

stages:
  - install
  - build
  - test
  - deploy_test

.artifacts: &artifacts_install
  artifacts:
    paths:
      - node_modules/
      - .venv/

.artifacts: &artifacts_build
  artifacts:
    paths:
      - lib/frontend/static/
      - node_modules/
      - .venv/

install:
  <<: *artifacts_install

build:
  <<: *artifacts_build

lint:
  dependencies:
    - build

test:
  dependencies:
